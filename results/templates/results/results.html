{% extends "main.html" %}
{% block content %}

<style>
    #cfg-wrapper {
        height:100%;
        position:relative;
    }

    #cfg-inner-wrapper {
        height:100%;
    }

    #cfg {
        height: 100%;
        overflow: auto;
        margin-left: 200px;
        padding-left: 30px;
        border-left: 1px solid #9e9e9e;
    }

    sidenav {
        position: fixed!important;
        width:200px;
        padding-left:10px;
    }

    input[type=submit] {
      width: 100%;
    }

    .container {
        padding: 20px 16px;
    }
</style>

<div id="cfg-wrapper" class="container">
    <div class="card" style="height:100%">
        <div id="cfg-inner-wrapper">

            {% if cfg is not None %}
            <sidenav>
                {% for i,j in keys %}
                <a style="font-size:16px; font-weight: bold; display:block;" href="/results/{{cfg}}/{{i}}">{{ j }}</a>
                {% endfor %}
            </sidenav>

            {% if form is not None %}
            {% load material_form %}
            <div id="cfg">
                <!--<div>-->
                    <h6 style="font-weight:bold">{{request.path}}</h6>
                    <form action="" method="post" style="padding-right:20px">
                        <fieldset disabled>
                        {% form form=form %}{% endform %}
                        </fieldset>
                    </form>
                <!--</div>-->
                {% if table is not None %}
                {% load django_tables2 %}
                {% render_table table %}
                {% endif%}

            </div>
            {% endif%}

            {% if forms is not None %}
            {% load material_form %}
            <div id="cfg">
                {% for frm in forms %}
                <div id="form{{forloop.counter0}}" class="card" style="display:none">
                    <h6 style="font-weight:bold">{{request.path}}/{{forloop.counter0}}</h6>
                    <form action="" method="post" style="padding-right:20px">
                        <!--{{ frm }}-->
                        <fieldset disabled>
                        {% form form=frm %}{% endform %}
                        </fieldset>
                    </form>
                </div>
                {% endfor %}

                <input id="prevbutton" type="button" value="Previous" class="btn blue" disabled/>
                <input id="nextbutton" type="button" value="Next" class="btn blue" disabled/>
            </div>

            <script>
                var form_id = 0

                function handleButtons(new_form_id) {
                    form_id = new_form_id
                    $("div[id^='form']").hide();
                    $("#form"+new_form_id).show();

                    if (new_form_id>0) $("#prevbutton").prop('disabled', false);
                    else $("#prevbutton").prop('disabled', true);

                    if ($('#form'+(new_form_id+1)).length) {
                        $("#nextbutton").prop('disabled', false);
                    } else {
                        $("#nextbutton").prop('disabled', true);
                    }
                }

                $("#prevbutton").click(function (){handleButtons(form_id-1)})
                $("#nextbutton").click(function (){handleButtons(form_id+1)})

                handleButtons(form_id)
            </script>

            {% endif %}
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
