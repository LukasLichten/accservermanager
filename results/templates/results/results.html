{% extends "main.html" %}
{% block content %}

<style>
    #cfg-wrapper {
        height:100%;
        position:relative;
    }

    #cfg-inner-wrapper {
        height:100%;
    }

    #cfg {
        height: 100%;
        overflow: auto;
        padding-left: 10px;
    }

    input[type=submit] {
      width: 100%;
    }

    .container {
        padding: 20px 16px;
    }
</style>

{% load django_bootstrap_breadcrumbs %}
{% block breadcrumbs %}
{% clear_breadcrumbs %}
{% for b, u in path %}
    {% breadcrumb_raw_safe b u %}
{% endfor %}
{% endblock %}

<div id="cfg-wrapper" class="container">
    <div class="card" style="height:100%">
        <div id="cfg-inner-wrapper">
            {% render_breadcrumbs %}
            {% if form is not None or table is not None %}
            <div id="cfg">


                {% if form is not None %}
                {% load material_form %}
                <form action="" method="post" style="padding-right:20px">
                    <fieldset disabled>
                    {% form form=form %}{% endform %}
                    </fieldset>
                </form>
                {% endif%}

                {% if table is not None %}
                {% load django_tables2 %}
                {% render_table table %}
                {% endif%}

            </div>
            {% endif%}

            {% if forms is not None %}
            {% load material_form %}
            <div id="cfg">
                {% for frm in forms %}
                <div id="form{{forloop.counter0}}" class="card" style="display:none">
                    <!--<h6 style="font-weight:bold">{{request.path}}/{{forloop.counter0}}</h6>-->
                    <form action="" method="post" style="padding-right:20px">
                        <!--{{ frm }}-->
                        <fieldset disabled>
                        {% form form=frm %}{% endform %}
                        </fieldset>
                    </form>
                </div>
                {% endfor %}

                <input id="prevbutton" type="button" value="Previous" class="btn blue" disabled/>
                <input id="nextbutton" type="button" value="Next" class="btn blue" disabled/>
            </div>

            <script>
                var form_id = 0

                function handleButtons(new_form_id) {
                    form_id = new_form_id
                    $("div[id^='form']").hide();
                    $("#form"+new_form_id).show();

                    if (new_form_id>0) $("#prevbutton").prop('disabled', false);
                    else $("#prevbutton").prop('disabled', true);

                    if ($('#form'+(new_form_id+1)).length) {
                        $("#nextbutton").prop('disabled', false);
                    } else {
                        $("#nextbutton").prop('disabled', true);
                    }
                }

                $("#prevbutton").click(function (){handleButtons(form_id-1)})
                $("#nextbutton").click(function (){handleButtons(form_id+1)})

                handleButtons(form_id)
            </script>

            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
